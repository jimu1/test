import{a as z,_ as b}from"./index.1eb004c8.js";import{d as I,ao as M,ak as s,ap as N,aF as D,r as x,o as v,c as p,ad as l,ae as S,a as X,f as _,ax as K,af as Z,s as m,ag as T,ah as Y}from"./vendor.e75d5d18.js";var w="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAFMN540AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAHqADAAQAAAABAAAAHgAAAADKQTcFAAADk0lEQVRIDbVX3UsVQRQ/My5h3mtvaQaFvQRBRFBP4UPQU1AQFJT9C0ERovZxryxeNdIk6K23oqKEggh69qEIii4U9FIviZcUjCDSa1G60zmzO7Mzs7vXvWYL3plzzu98zJmZc0aA6BPlwkeaMvoRpTZBI31cSeDyZ8lIICRXlArTwvc5EczUB8YGJVfqd+5B6+K6hWAjyywyWniE4tPSoPEjAeQAhYcln0L5XQeY3KthHLz+I5qaf28JMYgF6YIAuKABCkKCSVCpd2pFCfDbe0S5bVEMFW4oQfqqSVqpc2s5SkON4eIVFSVRkbaQuAbAUyg53se81N5oVnZAjI/FazV2EryOzcyf+aWFZEsMFU9CEDzWdpOTGuZ/p2KHbtdWUng90iZygZlN9XahCrD/rAa7EzpQjLYEBBRdoZkyKXtwBmD2tQXjeAJuWxyX+D4LcG1XQpFg4ZpLbYiAHa5eQ5oyrgBCCAblQqDozJH2r7J0leRaWYHlFQsmxjEPx3HztoNgb8HjZeYvvlQYNVrKmMHG4XN+ig0vPbGUc4cstdgUG6lj6uOE6SKirDYcowio4Aw0BKYJoyPM9cU2Qa1bAPo+mJzEnE5m8jISbNs+gE2F8GJmHdGVoJKuHBa20NvR0fQomDiYruwGufzN5SDN5uwyoSDCSL5TOhQEx2celUZMWofBBJh/h3+YsDt4yLK+lv5BJvzuVlhZ+JmFyeDLisKpFgEe9gxQKluVIpkweUvyGsAyrSzqiTSAd1TmQEnNEXuXbD6M6Wxat8rE0lzmY/XreZz2JZLqghVNG4DdClq23pIpUXxnTDiWt3OofQREcMXBro+kVA4vlpixWjJkORbl4uiGOXTDNCqfdhwdsU/IaK72usbXpmvYIXfLDinL7OrEfO499FoxT5ioP81ehSgqOgMt/V1MPjkC0bd2sIjo7gHovRdDZ7AFPL8E8ONLzMsz42zSCxtKHnQKhgI5F/WfZoLAJoZ3EbtY3s8sp66OCuKYfrO5iJgW0IUrxtapHpSxKH1mVlMXUb0LMI2vyXx7X/WoX8PK6gvXTiotnPdCc85ik/RGIMp6/Mbi/zOj8lmpj+sCkuOx+e+BGA8Z7Zisho+Z4kOc4Ut6Iz82BZWlXrNsWo5NV1EGbiJvvdWsBpxfNJ9qpv1MxyYo/D9t8hC+xE9AAAewwuMVVNeQzWEtmAMOVXT0FBvZK+b7zik0rYXzv/DTVe9ydbuiAAAAAElFTkSuQmCC";const W=t=>z({url:"business/h5/module/video",method:"get",params:t});const y=t=>(T("data-v-3c5fc202"),t=t(),Y(),t),J={key:0,class:"modal-mask"},O={class:"modal-content"},R={class:"modal-main"},G={class:"video-title"},L=["src"],P=y(()=>l("img",{class:"icon-play",src:w},null,-1)),j=y(()=>l("div",{class:"show-video-text"},"\u6F14\u793A\u89C6\u9891",-1)),q={key:2,class:"wrap-toast"},H=I({props:{moduleCode:{default:""},pageUrl:{default:""},pageName:{default:""}},setup(t){const i=t,E=M(),u=s(!1),g=s(""),f=s(""),n=s(""),d=s(0),c=s(0),C=e=>{c.value=e.target.currentTime},h=()=>{if(c.value<=0){const{pageUrl:e,pageName:o}=i;m.track("video_play",{page_url:e,page_name:o,video_name:n.value,page_title:"\u6F14\u793A\u89C6\u9891",video_duration:d.value})}},U=()=>{const{pageUrl:e,pageName:o}=i;m.track("video_stop",{page_url:e,page_name:o,stop_type:"\u6682\u505C",video_name:n.value,video_duration:d.value,video_play_duration:Math.floor(c.value)})},V=e=>{d.value=e.target.duration},k=()=>{const{pageUrl:e,pageName:o}=i;m.track("video_stop",{page_url:e,page_name:o,stop_type:"\u64AD\u653E\u5B8C\u6210",video_name:n.value,video_duration:d.value,video_play_duration:Math.floor(c.value)})};N(()=>{B()}),D(()=>{r.value=!1});const r=s(!1),B=async()=>{try{const e=await W({moduleCode:i.moduleCode}),{code:o,data:a}=e;if(o==="200")if(a&&a.videoUrl){f.value=a.coverImageUrl,g.value=a.videoUrl,n.value=a.title;const{firstViewFlag:A}=a;A&&(u.value=!0)}else{const{newRoleType:A}=E.getters.userInfo.staffInfo;A==="bizManager"&&(r.value=!0,setTimeout(()=>{r.value=!1},2e3))}}catch(e){console.error(e)}},F=()=>{m.track("page_click",{page_url:i.pageUrl,page_name:i.pageName,video_name:n.value,element_name:"\u6F14\u793A\u89C6\u9891"}),u.value=!0},Q=()=>{u.value=!1};return(e,o)=>{const a=x("van-icon");return v(),p(Z,null,[u.value?(v(),p("div",J,[l("div",O,[l("div",R,[l("div",G,S(n.value),1),l("video",{class:"video-player",src:g.value,autoplay:"",controls:"",onPlaying:h,onPause:U,onLoadedmetadata:V,onEnded:k,onTimeupdate:o[0]||(o[0]=A=>C(A))},null,40,L)]),X(a,{class:"btn-close",size:"32",name:"close",color:"#fff",onClick:Q})])])):_("",!0),!u.value&&g.value?(v(),p("div",{key:1,class:"btn-video",onClick:F},[l("div",{class:"pic-video",style:K(`background-image: url(${f.value})`)},null,4),P,j])):_("",!0),r.value?(v(),p("div",q,"\u6682\u65E0\u6F14\u793A\u89C6\u9891\u4FE1\u606F")):_("",!0)],64)}}});var oe=b(H,[["__scopeId","data-v-3c5fc202"]]);export{oe as M};
