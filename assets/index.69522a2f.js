import{d as de,aa as pe,ak as u,ap as ve,r as k,c as v,ad as e,a as c,w,ae as m,aq as n,at as g,au as y,f as D,af as me,b as M,av as z,T as p,o as r,ag as he,ah as _e,ai as P,ar as fe}from"./vendor.e75d5d18.js";import{_ as W}from"./ImgUpload.a9c69334.js";import{B as ge}from"./BusiCard.2398d64e.js";import{_ as Ce,g as Be}from"./index.1eb004c8.js";import{g as Fe,s as Ee}from"./service.08958120.js";import{V as we}from"./vue-cropper.es.a1a5f262.js";import"./html2canvas.esm.3d083717.js";const i=C=>(he("data-v-0f4e13f1"),C=C(),_e(),C),xe={class:"content-personal"},Ie=["src"],ke={key:1,class:"no-img"},ye={class:"main-personal"},De={class:"row-item"},be=i(()=>e("div",{class:"item-label"},"\u59D3\u540D",-1)),Ae={class:"item-value"},Se={class:"row-item"},Ne=i(()=>e("div",{class:"item-label"},"\u7EC4\u7EC7\u67B6\u6784\u4FE1\u606F",-1)),Ve={class:"item-value"},Te={class:"row-item"},Ye=i(()=>e("div",{class:"item-label"},"\u4ECE\u4E1A\u5E74\u9650",-1)),$e={class:"item-value"},Re={class:"row-item"},Ue=i(()=>e("div",{class:"item-label"},"\u6267\u7167\u53F7",-1)),je={class:"item-value"},Qe={class:"row-item"},Me=i(()=>e("div",{class:"item-label"},"\u624B\u673A\u53F7",-1)),ze={class:"item-value"},Pe={class:"row-item"},We={class:"item-label"},qe=i(()=>e("span",null,"\u81EA\u6211\u4ECB\u7ECD",-1)),He=i(()=>e("p",{class:"item-value"},"\u672C\u4EBA\u62E5\u6709\u4E30\u5BCC\u7684\u4FDD\u9669\u884C\u4E1A\u7ECF\u9A8C\uFF0C\u53EF\u4E3A\u60A8\u63D0\u4F9B\u5168\u9762\u7684\u4FDD\u9669\u670D\u52A1",-1)),Oe={class:"row-item"},Le={class:"item-label"},Ke=i(()=>e("span",null,"\u4E0A\u4F20\u5FAE\u4FE1\u4E8C\u7EF4\u7801",-1)),Ge={class:"btn-upload"},Je=i(()=>e("span",null,"\u4E0A\u4F20\u6587\u4EF6",-1)),Xe={key:0,class:"user-qr-code"},Ze=["src"],eo={class:"wrap-btn"},oo=P("\u4FDD\u5B58"),so=P("\u5206\u4EAB"),ao={class:"cropperBlackShade"},to={class:"cropperModal"},uo={class:"cropperContent"},no={class:"cropperBox"},lo=de({setup(C){const{proxy:q}=fe(),o=pe({phone:"",licenseCode:"",practicingYears:"",descShowState:!0}),B=u(!1),d=u(""),h=u(""),x=u(),b=u(),_=u(!1),H=()=>{f.value=""},A=t=>{x.value.onPhotoSelect(t)},O=()=>{_.value=!1,h.value=""},f=u(""),L=u("png"),K=u(!0),G=u(!1),J=u(!0),X=u(175),Z=u(175),ee=u(!0),oe=u(!1),se=u(!0),ae=u([1,1]),S=u(),N=t=>{h.value=t[1],f.value="",f.value=t[0],_.value=!0},te=()=>{S.value.getCropData(async t=>{f.value=t,h.value==="avatarImg"&&x.value.uploadImage(t),h.value==="wechatQrcodeImg"&&b.value.uploadImage(t),_.value=!1})},ue=t=>{t==="success"||p({message:"\u56FE\u7247\u4E0A\u4F20\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5",duration:2e3})};ve(()=>{Be(["chooseImage"]),V()});const V=async()=>{try{const t=await Fe();t.code==200&&(Object.assign(o,t.data),o.practicingYears&&(B.value=!0),d.value=$(o.phone),o.phone&&(I.value=!0))}catch(t){console.error(t)}},T=u(null),ne=()=>{B.value=!1,q.$nextTick(()=>{T.value.focus()})},le=t=>{o.practicingYears=t.target.value.replace(/[^\d_.]/g,"")},ce=t=>{I.value=!1,d.value=t.target.value.replace(/[^\d_*]/g,""),o.phone=d.value},F=u(!0),I=u(!1),Y=()=>{F.value?d.value=o.phone:d.value=$(d.value),F.value=!F.value},$=t=>{const s=/^(\d{3})\d{4}(\d{4})$/;return t.replace(s,"$1****$2")},R=(t,s)=>{h.value==="avatarImg"&&(o.avatarImg=t,o.avatarImgKey=s),h.value==="wechatQrcodeImg"&&(o.wechatQrcodeImg=t,o.wechatQrcodeImgKey=s)},U=u(),j=t=>{var s=new RegExp("^[0-9]*$");o.phone?!s.test(o.phone)||o.phone.length<11?p("\u624B\u673A\u53F7\u8F93\u5165\u6709\u8BEF"):re(t):p("\u8BF7\u8F93\u5165\u624B\u673A\u53F7")},re=async t=>{try{p.loading({duration:0});const s=await Ee(o);p.clear(),s.code==200?(V(),t?U.value.show=!0:p("\u4FDD\u5B58\u6210\u529F")):p(s.message)}catch{p("\u4FDD\u5B58\u5931\u8D25")}};return(t,s)=>{const E=k("van-icon"),ie=k("van-switch"),Q=k("van-button");return r(),v("div",xe,[e("div",{onClick:s[1]||(s[1]=a=>A("avatarImg"))},[c(W,{class:"upload-head",onSuccess:s[0]||(s[0]=(a,l)=>R(a,l)),ref:(a,l)=>{l.personRef=a,x.value=a},onShowCropper:N},{default:w(()=>[n(o).avatarImg?(r(),v("img",{key:0,class:"user-head",src:n(o).avatarImg},null,8,Ie)):(r(),v("div",ke,[c(E,{name:"photograph",size:"24",color:"#fff"})]))]),_:1},512)]),e("div",ye,[e("div",De,[be,e("p",Ae,m(n(o).agentName),1)]),e("div",Se,[Ne,e("p",Ve,m(n(o).parentOrgName)+m(n(o).orgName)+m(n(o).oldBoroughName)+m(n(o).oldOfficeName)+m(n(o).oldDeptname),1)]),e("div",Te,[Ye,e("div",$e,[!B.value||!n(o).practicingYears?g((r(),v("input",{key:0,ref:(a,l)=>{l.yearRef=a,T.value=a},class:"ipt-value",placeholder:"\u8BF7\u8F93\u5165\u4ECE\u4E1A\u5E74\u9650",maxlength:5,"onUpdate:modelValue":s[2]||(s[2]=a=>n(o).practicingYears=a),onBlur:s[3]||(s[3]=a=>B.value=!0),onInput:le},null,544)),[[y,n(o).practicingYears]]):n(o).practicingYears?(r(),v("p",{key:1,class:"work-year",onClick:ne},m(n(o).practicingYears)+"\u5E74",1)):D("",!0)])]),e("div",Re,[Ue,e("div",je,[g(e("input",{class:"ipt-value license",placeholder:"\u8BF7\u8F93\u5165\u6267\u7167\u53F7",maxlength:30,"onUpdate:modelValue":s[4]||(s[4]=a=>n(o).licenseCode=a)},null,512),[[y,n(o).licenseCode]])])]),e("div",Qe,[Me,e("div",ze,[g(e("input",{class:"ipt-value",placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7",maxlength:11,"onUpdate:modelValue":s[5]||(s[5]=a=>d.value=a),onInput:ce},null,544),[[y,d.value]]),I.value?(r(),v(me,{key:0},[F.value?(r(),M(E,{key:0,name:"eye",size:"20",onClick:Y})):(r(),M(E,{key:1,name:"weapp-nav",size:"20",onClick:Y}))],64)):D("",!0)])]),e("div",Pe,[e("div",We,[qe,c(ie,{size:"18px","active-color":"#fa6400",modelValue:n(o).descShowState,"onUpdate:modelValue":s[6]||(s[6]=a=>n(o).descShowState=a)},null,8,["modelValue"])]),He]),e("div",Oe,[e("div",Le,[Ke,e("div",{onClick:s[8]||(s[8]=a=>A("wechatQrcodeImg"))},[c(W,{onSuccess:s[7]||(s[7]=(a,l)=>R(a,l)),ref:(a,l)=>{l.personRef2=a,b.value=a},onShowCropper:N},{default:w(()=>[e("div",Ge,[Je,c(E,{name:"back-top",size:"16px"})])]),_:1},512)])]),n(o).wechatQrcodeImg?(r(),v("div",Xe,[e("img",{class:"img-qr-code",src:n(o).wechatQrcodeImg},null,8,Ze)])):D("",!0)])]),e("div",eo,[c(Q,{class:"btn-save",color:"#fa6400",plain:"",onClick:s[9]||(s[9]=a=>j(!1))},{default:w(()=>[oo]),_:1}),c(Q,{class:"btn-share",color:"#fa6400",plain:"",onClick:s[10]||(s[10]=a=>j(!0))},{default:w(()=>[so]),_:1})]),c(ge,{ref:(a,l)=>{l.cardRef=a,U.value=a},data:n(o)},null,8,["data"]),g(e("div",ao,null,512),[[z,_.value]]),g(e("div",to,[e("div",uo,[e("div",no,[c(n(we),{class:"vueCropper",ref:(a,l)=>{l.cropperItem=a,S.value=a},img:f.value,outputType:L.value,canMoveBox:G.value,fixedBox:K.value,autoCrop:J.value,autoCropWidth:X.value,autoCropHeight:Z.value,centerBox:ee.value,high:oe.value,infoTrue:se.value,fixedNumber:ae.value,onImgLoad:ue,mode:"contain"},null,8,["img","outputType","canMoveBox","fixedBox","autoCrop","autoCropWidth","autoCropHeight","centerBox","high","infoTrue","fixedNumber"])])]),e("div",{class:"testButton"},[e("button",{onClick:te},"\u4FDD\u5B58"),e("button",{onClick:H},"\u6E05\u9664"),e("button",{onClick:O},"\u5173\u95ED")])],512),[[z,_.value]])])}}});var _o=Ce(lo,[["__scopeId","data-v-0f4e13f1"]]);export{_o as default};
