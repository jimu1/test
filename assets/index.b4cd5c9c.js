var q=Object.defineProperty,$=Object.defineProperties;var W=Object.getOwnPropertyDescriptors;var T=Object.getOwnPropertySymbols;var ee=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable;var P=(e,t,a)=>t in e?q(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,F=(e,t)=>{for(var a in t||(t={}))ee.call(t,a)&&P(e,a,t[a]);if(T)for(var a of T(t))te.call(t,a)&&P(e,a,t[a]);return e},K=(e,t)=>$(e,W(t));import{d as D}from"./dayjs.min.d6be5126.js";import{l as ae}from"./lodash.8f6c4f2c.js";import{d as E,aD as A,I as L,A as j,P as se,W as oe,ak as p,r as N,o as r,c as v,ad as s,a as y,aq as _,w as z,ag as M,ah as U,ar as R,aj as H,an as le,af as S,ay as x,ae as I,al as ue,f as V,b as Q,aH as ne,ax as re,am as ie,ap as ce,aJ as de}from"./vendor.e75d5d18.js";import{_ as k,b as X,a as Ae}from"./index.1eb004c8.js";import{t as pe}from"./num.be6454b3.js";var ve="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAAEEfUpiAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAELUlEQVRYCd1Xz2tTQRDe2Zekeqh69tdBQRTBk3gQNYlt0hRB8eLJi6CCKBU9eRP/AlEUQQtePHkRBW370ppUPVTwJBRF9FK0f4Cth6Z5u87My6z7XprE6EV8kOzuzHzfztuZnd2n1FrPZFizJJ+s1r8n9KQAp7F2MKF1gzB8s5mtwvoKC4VQLGKO1iwDWTXIAtIS1KjVb2ypYbwyXDgnKJWmIYXItCAmZVIUTM3MHmV5r78wnD3ey0Y5J3HOJloHhKiUi07ODORQOD17kQbWWi0O0jh2Ejvl4fxdEgCAQd4rU2H9BY2dAQ3kyUAQ4rLvpHFGhH7bNNG8+OGcScwL8MlYu0uMfLDrT1Xrt93gbzrOBSKZmq6PWWNvdSYEUykXeC3FxhHIQmutL8mSiZG08p6YRtuKxeJXkvvLyMydwGRM+UdtowkfqKXHJ2ABRZI7a/ytrKo5EmMwr4navQIJMCUjTIaYAKM9kFHjURRsx7g9RvVeAZEn+ArLNE4QiEGtVtvaWIX7qD2MO3RRA9yWV8MUemuVPUC2XeMsZP9+27YGk9P1B8rYsynXI62y28vlQ4speXIRE1FIW+IYNFweGS4k9oDzgEshFzxojJTy63njtkhotxtj7tAQPdnie8Ixp7BhLeAsw1wf8MEEohBSilMfi98CtfIwAcecJJg8oki3kgcoT2wmybrDBKDMSwN7jZmAso0MKW17AdJ6JqBUJUUr59M2PO60yZjAe7+9neo6lrAGM+HJ4c/gqqZW+oRR5qmNzAwWjvmMDk4FQbSw0lRnlVU3Hciq3a6PHZcHJKTDgkh8A9cHvaSsiQ9GgDeVUoEXPo5Cy6pczj+jLcoxx9KM+bAMCiaohFVK+Q0BDG5iU2sPhWFtvyPvpzM3N7cBa0LYD+bftk0EoZurtN9WI30Cz51jdHAikO8jlMRg1Rfc6c+zgXkqx0U3Ll/X1QHOCrCPZKP7wK59gCVt4TQlRVc7VK7pQJyO9ok7YX6xzCNinK4PlOMk5lPHRmXMdSqi7uSJIWC0gpPdHGlzoL0iQwMCGB0Zyr+MSbv/0062kZ1A53POMn3vc4rUCviFt2UzP1Iq7EvXVw+/ZpfqDpaO96h0K9LpypHYyHinGvMZqZz0OznhCUNYnyvNLbqEA5LZopQ4y7ifNo1NcwtXwgFMpNeioJYLqS/oo9+GTXELVcKBXNaeRwXer1oPVnG5fovod1rG+CcAcra42+Btu4C/WqD5Mbn3oaE1XC0NHbnXKSco8aozry5gexN/WZkJ7Zu5TG5PsXjws8j8ts0BUca3bTrHOl9Xxfa3WjzCBjJ2VG6lgunogBjwiujmDbytnUFZ4kYiNl4bKQ0PtclcB1j3w9jlUG6yzgbUDF7OSrgy/Gna0wEH/MNOtfpuY9IRaGSD3I6hoYPxx+kf8v4/sJ/q17VHv2YCNwAAAABJRU5ErkJggg==",me="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAABeklEQVRIDe1UwUrDQBA14i0N5FhPrvgH6UVBsL+iXkp7riieRf+qEQT9CcmmHuwxl+DVV1ZmZzdhk9Us9GBZyuy8mTd9M9ON6vprL+RnPyT5lns3CuT58+nZuTg+oYMrnH3UR31mALrN5tOiG48P315fLGfzetB0NT2KXRbvBEFKsySh3NiNGfBf5GsHV6CHjK24vbvv2VmHDgz/6fFhOr1QMbpA66o4iBwQXzC9Rc1VcVA4IGvBgs8geAHdIjQOXYJAh/yeEKgoUivA6DlAEb4GSEBFWXqLlEsp4K8ChXYarblaQWf+7wL+C3T2raNFl1fXOMTivlIYN/T/AN6qqvAdxzFFrFY52TDcVyTWdQ2SNE0py1BQliUAIQTBXoZKVCSUaBQoCgngjwUUSXsB+aPgiGAvQ4htopSSZxkKBmnRev3BCxhDTkYJsOXyBocHWS+g+5okI55rKFgsZpNsEkURj/Cysyybz2c8xX7sODaIbSgYhNEiCV7gG/qKgrilujYxAAAAAElFTkSuQmCC";var he=E({props:{size:{type:String,default:"large"},placeholder:{type:String,default:"\u8BF7\u9009\u62E9"},icon:{type:String,default:""},option:{type:Array,default:()=>[]},value:{type:[String,Number],default:null}},data(){const e=this.option.find(t=>t.value===this.value);return{show:!1,cusValue:this.value,title:e?e.text:""}},methods:{onConfirm(e,t){this.title=e.text,this.show=!1,this.$emit("update:value",e.value,e,t)}},watch:{value(e){this.cusValue=e;const t=this.option.find(a=>a.value===this.value);this.title=t?t.text:""}},render(){return A("div",{class:`wrap-select select-${this.size}`},[A("div",{class:"slt-text",onClick:()=>this.show=!0},[this.cusValue?A("span",[this.title]):A("span",{class:"placeholder"},[this.placeholder]),A(L,{name:this.icon||"arrow-down",color:"#909090",size:16})]),A(j,{position:"bottom",show:this.show},{default:()=>A(se,{showToolbar:!0,columns:this.option,onCancel:()=>this.show=!1,onConfirm:this.onConfirm})})])}});var O=E({props:{type:{type:String,default:"date"},placeholder:{type:String,default:"\u8BF7\u9009\u62E9"},format:{type:String,default:null},minDate:Date,maxDate:Date,value:{type:Date,default:new Date}},data(){return{show:!1,cusValue:this.value,dateText:this.value?D(this.value).format("YYYY-MM-DD"):""}},watch:{value(e){this.cusValue=new Date,e?this.dateText=D(e).format("YYYY-MM-DD"):this.dateText=""}},methods:{onConfirm(e){this.$emit("update:value",e),this.show=!1}},render(){return A("div",{class:"cus-date-picker"},[A("p",{class:"date-picker-text",onClick:()=>this.show=!0},[this.dateText?A("span",[this.dateText]):A("span",{class:"placeholder"},[this.placeholder]),A(L,{class:"icon-arrow-down",name:"play",color:"#999",size:12})]),A(j,{position:"bottom",show:this.show},{default:()=>A(oe,{type:this.type,minDate:this.minDate,maxDate:this.maxDate,modelValue:this.cusValue,onConfirm:this.onConfirm,onCancel:()=>this.show=!1})})])}});const G=e=>(M("data-v-48352edb"),e=e(),U(),e),fe={class:"wrap-search"},ge={class:"wrap-form"},De={class:"wrap-order"},ye=G(()=>s("img",{slot:"left-icon",class:"search_icon",src:ve},null,-1)),_e={class:"search-date"},Ce={class:"picker_box"},we=G(()=>s("img",{class:"bills_reset",src:me},null,-1)),Be=E({emits:["search"],setup(e,{emit:t}){const{proxy:a}=R(),u=p("N"),i=p(""),h=[{text:"\u672A\u627F\u4FDD",value:"N"},{text:"\u5DF2\u627F\u4FDD",value:"Y"}],o=p(D().subtract(29,"day").toDate()),c=p(new Date),l=()=>{c.value=null},n=b=>{u.value=b,B()},C=()=>{B()},Y=()=>{u.value="N",i.value="",o.value=D().subtract(29,"day").toDate(),c.value=new Date,B()},B=()=>{if(!c.value){a.$toast("\u8BF7\u9009\u62E9\u7ED3\u675F\u65E5\u671F");return}t("search",{isUnderwritingPass:u.value,orderId:i.value,appBeginDate:D(o.value).format("YYYY-MM-DD"),appEndDate:D(c.value).format("YYYY-MM-DD")})};return(b,m)=>{const w=N("van-search"),d=N("van-icon");return r(),v("div",fe,[s("div",ge,[y(_(he),{class:"slt-status",size:"small","onUpdate:value":[n,m[0]||(m[0]=f=>u.value=f)],value:u.value,option:h},null,8,["value"]),s("div",De,[y(w,{modelValue:i.value,"onUpdate:modelValue":m[1]||(m[1]=f=>i.value=f),"use-left-icon-slot":"true",shape:"round",placeholder:"\u8BF7\u8F93\u5165\u8BA2\u5355\u53F7\u67E5\u8BE2",maxlength:"50",onSearch:B,background:"#fff","placeholder-style":"font-family: PingFangSC-Regular;color: #B8BABF;","field-class":"searchInput"},{default:z(()=>[ye]),_:1},8,["modelValue"])])]),s("div",_e,[s("div",Ce,[y(_(O),{value:o.value,"onUpdate:value":[m[2]||(m[2]=f=>o.value=f),l],"max-date":new Date},null,8,["value","max-date"]),y(d,{class:"icon-minus",name:"minus",size:"14",color:"#c4c4c4"}),y(_(O),{value:c.value,"onUpdate:value":[m[3]||(m[3]=f=>c.value=f),C],"min-date":o.value||void 0,"max-date":_(D)(o.value).add(29,"day").toDate()||void 0},null,8,["value","min-date","max-date"])]),s("div",{class:"reset_box"},[we,s("div",{class:"name",onClick:Y},"\u91CD\u7F6E")])])])}}});var be=k(Be,[["__scopeId","data-v-48352edb"]]);const Ee=[{label:"\u8BA2\u5355\u53F7",code:"orderId"},{label:"\u6295\u4FDD\u4EBA\u59D3\u540D",code:"holderName"},{label:"\u88AB\u4FDD\u4EBA\u59D3\u540D",code:"insuredNames"},{label:"\u8BA2\u5355\u65E5\u671F",code:"orderCreateDate"},{label:"\u8BA2\u5355\u91D1\u989D",custom:e=>pe(e.orderPremium,2)+"\u5143"},{label:"\u5546\u54C1\u540D\u79F0",code:"commodityName"},{label:"\u8BA2\u5355\u72B6\u6001",code:"orderStatusName",custom:e=>e.orderStatusName=="\u5F85\u652F\u4ED8"?`<span style="color: green">${e.orderStatusName}</span>`:e.orderStatusName=="\u5DF2\u5931\u6548"?`<span style="color: gray">${e.orderStatusName}</span>`:`<span style="color: #FF7C0A">${e.orderStatusName}</span>`},{label:"\u8BA2\u5355\u903E\u671F\u65F6\u95F4",code:"orderExpiresTime"}],Ne=[{label:"\u6761\u5F62\u7801\u53F7",code:"barCode"},{label:"\u6295\u4FDD\u4EBA\u59D3\u540D",custom:e=>e.holder.name},{label:"\u6295\u4FDD\u65E5\u671F",code:"applyDate"},{label:"\u6295\u4FDD\u5355\u72B6\u6001",custom:e=>e.policyApplicationStatusCode=="07"?e.policyApplicationStatusName:`<span style="color: red">${e.policyApplicationStatusName}</span>`},{label:"\u4EA7\u54C1\u540D\u79F0",code:"productName"},{label:"\u9669\u79CD\u540D\u79F0",code:"planNames"}];const Fe=e=>(M("data-v-1fdc374b"),e=e(),U(),e),Se={class:"insured-item"},xe={class:"item-label"},Ie=["innerHTML"],ke={class:"wrap-btn"},Ye=["onClick"],Me=Fe(()=>s("span",null,"\u67E5\u770B\u8BE6\u60C5",-1)),Ue=E({props:{data:{type:Object,default:()=>({})},seller:{type:Object,default:()=>({})}},setup(e){const t=e,a=H(),u=le(),i=()=>{sessionStorage.setItem("insured",JSON.stringify(F(F({},t.data),t.seller))),u.push({path:"/policy/insured-detail",query:{token:a.query.token}})};return(h,o)=>{const c=N("van-icon");return r(),v("div",Se,[(r(!0),v(S,null,x(_(Ne),l=>(r(),v("div",{key:l.code,class:"row-item"},[s("label",xe,I(l.label),1),s("p",{class:"item-value",innerHTML:l.custom?l.custom(e.data):e.data[l.code]||"-"},null,8,Ie)]))),128)),s("div",ke,[s("a",{class:"btn-detail",onClick:ue(i,["prevent"])},[Me,y(c,{name:"arrow",color:"#ee8334"})],8,Ye)])])}}});var Re=k(Ue,[["__scopeId","data-v-1fdc374b"]]);const Ve=e=>(M("data-v-ab86d436"),e=e(),U(),e),Qe={class:"policy-item"},Te={class:"item-label"},Pe=["innerHTML"],Ke={key:0,class:"row-item"},Le=Ve(()=>s("label",{class:"item-label"},"\u9500\u552E\u4EBA\u5458\u59D3\u540D",-1)),je={class:"item-value"},ze=E({props:{data:{type:Object,default:()=>({})}},setup(e){const{proxy:t}=R(),a=p(!1),u=p(0);let i=p(null);const h=()=>{a.value?(u.value=0,a.value=!1):(u.value="auto",a.value=!0,t.$nextTick(()=>{const o=i.value.offsetHeight;u.value=0,setTimeout(()=>{u.value=o+"px"},0)}))};return(o,c)=>{const l=N("van-icon");return r(),v("div",Qe,[(r(!0),v(S,null,x(_(Ee),n=>(r(),v("div",{key:n.code,class:"row-item"},[s("label",Te,I(n.label),1),s("p",{class:"item-value",innerHTML:n.custom?n.custom(e.data):e.data[n.code]||"-"},null,8,Pe)]))),128)),_(X)()==="wxwork"?(r(),v("div",Ke,[Le,s("p",je,I(e.data.sellerName||"-"),1)])):V("",!0),s("div",{class:"insured-list",ref:(n,C)=>{C.insuredList=n,ne(i)?i.value=n:i=n},style:re({height:u.value})},[(r(!0),v(S,null,x(e.data.policyInfoList,(n,C)=>(r(),Q(Re,{key:C,data:n,seller:{sellerCode:e.data.sellerCode,sellerName:e.data.sellerName,empNo:e.data.empNo}},null,8,["data","seller"]))),128))],4),e.data.policyInfoList&&e.data.policyInfoList.length?(r(),v("div",{key:1,class:"wrap-btn",onClick:h},[s("span",null,I(a.value?"\u6536\u8D77":"\u5C55\u5F00")+"\u6295\u4FDD\u5355",1),y(l,{class:ie({unfold:a.value}),name:"arrow-down",color:"#ee8334"},null,8,["class"])])):V("",!0)])}}});var He=k(ze,[["__scopeId","data-v-ab86d436"]]);const Xe=e=>Ae({url:"insurance/policy/application",method:"post",data:e});const Oe={class:"container-insured"},Ge=E({setup(e){const a=H().query.agentNo,{proxy:u}=R(),i=p({isUnderwritingPass:"N",orderId:"",appBeginDate:D().subtract(29,"day").format("YYYY-MM-DD"),appEndDate:D().format("YYYY-MM-DD")}),h=p(!1),o=p(!1),c=p(0),l=p([]);ce(()=>{sessionStorage.removeItem("insured")});const n=w=>{i.value=F({},w),o.value=!1,c.value=0,l.value=[],C()},C=()=>{h.value=!0,c.value=c.value+1,Y(K(F({agentNo:X()==="wxwork"?a:""},i.value),{pageNo:c.value,pageSize:10}))},Y=async w=>{try{const d=await Xe(w);d.code==="200"?(d.data&&d.data.orderList&&(l.value=l.value.concat(d.data.orderList)),d.data.lastFlag&&(o.value=!0)):(u.$toast(d.message),o.value=!0)}catch{o.value=!0}finally{h.value=!1}},B=p(0),b=p(null),m=ae.exports.debounce(w=>{B.value=w.target.scrollTop},300);return de(()=>{b.value&&(b.value.scrollTop=B.value)}),(w,d)=>{const f=N("van-empty"),Z=N("van-list");return r(),v("div",Oe,[y(be,{onSearch:n}),s("div",{class:"scroll-list",ref:(g,J)=>{J.listRef=g,b.value=g},onScroll:d[1]||(d[1]=(...g)=>_(m)&&_(m)(...g))},[y(Z,{class:"main-list",finished:o.value,"finished-text":l.value.length>0?"\u6CA1\u6709\u66F4\u591A\u4E86":"",loading:h.value,"onUpdate:loading":d[0]||(d[0]=g=>h.value=g),onLoad:C},{default:z(()=>[(r(!0),v(S,null,x(l.value,g=>(r(),Q(He,{key:g.orderId,data:g},null,8,["data"]))),128)),!h.value&&!l.value.length?(r(),Q(f,{key:0,image:"search",description:"\u6682\u65E0\u6570\u636E"})):V("",!0)]),_:1},8,["finished","finished-text","loading"])],544)])}}});var tt=k(Ge,[["__scopeId","data-v-16e232be"]]);export{tt as default};
